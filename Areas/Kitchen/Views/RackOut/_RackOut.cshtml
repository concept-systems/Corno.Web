@using Kendo.Mvc.UI
@model Corno.Web.Areas.Kitchen.Dto.Rack_Out.RackOutViewDto
@{
    ViewBag.Index = "Index";
    ViewBag.Create = "Create";
    ViewBag.Edit = "Edit";
    ViewBag.Delete = "Delete";
    ViewBag.View = "View";
}

@{
    var controllerName = "RackOut";
    var action = "Create";
}

@{
    ViewBag.BoxTitle = "Rack Out";
    ViewBag.MainMenu = "WMS";
    ViewBag.MainHeader = "Rack Out";
    ViewBag.CurrentSitemap = "Rack Out";
    ViewBag.Title = "Rack Out";
}

@(Html.Kendo().TextBoxFor(m => m.WarehouseOrderNo)
    .Label(l => l.Content("WHr Order no here...").Floating(true))
    .HtmlAttributes(new
    {
        style = "width: 100% !important; max-width: 1400px !important;"
    }))
@(Html.Kendo().TextAreaFor(m => m.CartonBarcode)
    .Rows(2)
    .Label(l => l.Content("Scan Barcode here").Floating(true))
    .HtmlAttributes(new
    {
        style = "width: 100% !important; max-width: 1400px !important;col-form-label"
    }))
<hr/>
@(Html.Kendo().Grid(Model.RackOutDetails)
            .Name("grid")
                    .Columns(columns =>
                    {
                        columns.Bound(m => m.WarehouseOrderNo)
                            .HeaderHtmlAttributes(new { @class = "k-text-center !k-justify-content-center" })
                            .ClientTemplate("#= WarehouseOrderNo #" + "<input type='hidden' name='RackOutDetails[#= index(data)#].WarehouseOrderNo' value='#= WarehouseOrderNo #' />   ")
                            .HtmlAttributes(new { style = "text-align: center" });
                        columns.Bound(m => m.CartonBarcode)
                            .HeaderHtmlAttributes(new { @class = "k-text-center !k-justify-content-center" })
                            .ClientTemplate("#= CartonBarcode #" + "<input type='hidden' name='RackOutDetails[#= index(data)#].CartonBarcode' value='#= CartonBarcode #' />")
                            .HtmlAttributes(new { style = "text-align: center" });
                    })
                    .Sortable()
                    .Pageable()
                    .Scrollable()
                    .DataSource(dataSource => dataSource
                        .Ajax()
                        .PageSize(20)
                        .ServerOperation(true)
                    )
                    .Resizable(resize => resize.Columns(true))
                    .Reorderable(reorder => reorder.Columns(true)))



<script type="text/javascript">
    $(document).ready(function () {
        $("#WarehouseOrderNo").on("keypress", function (e) {
            if (e.which === 13) { // Enter key pressed
                e.preventDefault();
                var txtBarcode = $("#CartonBarcode").data("kendoTextArea");
                txtBarcode.focus();
            }
        });
    });

    $("#CartonBarcode").on("keydown", function (e) {
        if (e.which === 13) { // Enter key pressed
            e.preventDefault();
            submitForm("Scan");
        }
    });

    setTimeout(function () {
        document.getElementById("CartonBarcode").focus();
        $('#CartonBarcode').val(''); //txtID is textbox ID
    }, 100); // Delay to ensure focus is set correctly

    function submitForm(action) {
        var form = document.getElementById("form");

        @*// Send report type
        document.getElementById("type").value = type;*@

        // Action Name
        var input = document.createElement("input");
        input.type = "hidden";
        input.name = "action:" + action;

        console.log(action);

        form.appendChild(input);
        form.submit();

    }

</script>
