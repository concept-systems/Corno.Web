@using Corno.Web.Areas.Admin.Dto
@model ChangePasswordDto

@{
    Layout = "~/Views/Shared/_AppLayout.cshtml";
    ViewBag.BoxTitle = "Change Password";
}

<div class="change-password-container" style="padding: 20px;">
    <div class="k-card" style="max-width: 500px; margin: 0 auto;">
        <div class="k-card-header">
            <h3 class="k-card-title">Change Password</h3>
        </div>
        <div class="k-card-body">
            @using (Html.BeginForm("ChangePassword", "Profile", new { area = "Admin" }, FormMethod.Post, new { @class = "k-form" }))
            {
                @Html.AntiForgeryToken()

                <div class="k-form-field">
                    @Html.LabelFor(m => m.OldPassword, new { @class = "k-form-label" })
                    @Html.PasswordFor(m => m.OldPassword, new { @class = "k-textbox k-input-md", required = "required" })
                    @Html.ValidationMessageFor(m => m.OldPassword)
                </div>

                <div class="k-form-field">
                    @Html.LabelFor(m => m.NewPassword, new { @class = "k-form-label" })
                    @Html.PasswordFor(m => m.NewPassword, new { @class = "k-textbox k-input-md", required = "required" })
                    @Html.ValidationMessageFor(m => m.NewPassword)
                    <span class="k-form-hint">Password must be at least 6 characters long</span>
                </div>

                <div class="k-form-field">
                    @Html.LabelFor(m => m.ConfirmPassword, new { @class = "k-form-label" })
                    @Html.PasswordFor(m => m.ConfirmPassword, new { @class = "k-textbox k-input-md", required = "required" })
                    @Html.ValidationMessageFor(m => m.ConfirmPassword)
                </div>

                <div class="k-form-buttons k-hstack k-gap-2" style="margin-top: 20px;">
                    <button type="submit" class="k-button k-button-md k-button-solid k-button-primary">
                        <span class="k-icon k-i-check"></span>
                        <span>Change Password</span>
                    </button>
                    <a href="@Url.Action("Index", "Profile", new { area = "Admin" })" class="k-button k-button-md k-button-solid-base">
                        <span>Cancel</span>
                    </a>
                </div>
            }
        </div>
    </div>
</div>

<script>
    $(document).ready(function() {
        $("form").on("submit", function(e) {
            var newPassword = $("#NewPassword").val();
            var confirmPassword = $("#ConfirmPassword").val();

            if (newPassword !== confirmPassword) {
                e.preventDefault();
                alert("New password and confirm password do not match");
                return false;
            }

            if (newPassword.length < 6) {
                e.preventDefault();
                alert("Password must be at least 6 characters long");
                return false;
            }
        });
    });
</script>

