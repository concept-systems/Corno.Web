@model Corno.Web.Areas.Masters.Dtos.Item.ItemDto
@using Kendo.Mvc.UI

<div class="row">
    @(Html.Kendo().Grid(Model.ItemPacketDtos)
        .Name("grid")
        .Columns(columns =>
        {
            columns.Bound(p => p.Id)
                .ClientTemplate("<input type='hidden' name='ItemPacketDetails[#= index(data)#].Id' value='#= Id #' />")
                .Hidden();
            columns.Bound(p => p.PackingTypeId)
                .ClientTemplate("#= PackingTypeName  #" +
                                "<input type='hidden' name='ItemPacketDetails[#= index(data)#].PackingTypeId' value='#= PackingTypeId #' />")
                .Width(180);
            columns.Bound(p => p.Quantity).Title("Quantity")
                .ClientTemplate("#= Quantity #" +
                                "<input type='hidden' name='ItemPacketDetails[#= index(data)#].Quantity' value='#= Quantity #'   />")
                .Width(50);
            columns.Command(command =>
            {
                command.Edit();
                command.Destroy();
            }).Width(200);
        })
        .ToolBar(toolbar => toolbar.Create())
        .Editable(editable => editable.Mode(GridEditMode.PopUp)
            .TemplateName("/Item/_PacketPopup"))
        .Pageable()
        .Filterable(f => f.Mode(GridFilterMode.Row))
        .Sortable()
        .Scrollable()
        .DataSource(dataSource => dataSource
            .Ajax()
            .PageSize(20)
            .Events(events => events.Error("error_handler"))
            .Model(model =>
            {
                model.Id(p => p.Id);
                model.Field(p => p.Quantity).DefaultValue(0);
            })
            .Create(update => update.Action("Inline_Create_Item", "Item"))
            .Update(update => update.Action("Inline_Create_Item", "Item"))
            .Destroy(update => update.Action("Inline_Create_Item", "Item"))
        ))
</div>
